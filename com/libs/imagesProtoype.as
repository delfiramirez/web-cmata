MovieClip.prototype.effectMask = function(myImage, nrows, ncols, spd, mode, fx) {	var cinit = 0;	var easing:Number = 5;		for (var v = 0; v<a_nrows*a_ncols; v++)	{		removeMovieClip(eval("cuadre"+v));	}	a_nrows = nrows;	a_ncols = ncols;	attachMovie(myImage, "foto", 1);	foto._visible = false;	cw = foto._width/ncols;	ch = foto._height/nrows;	i = 0;	c = 0;	cinit = 0;	onEnterFrame = function ()	{		if (i<nrows*ncols && c == spd) {			var clip = createEmptyMovieClip("cuadre"+i, 10+i);			clip.attachMovie(myImage, "foto", 1);			clip.createEmptyMovieClip("draw", 2);			with (clip.draw) {				beginFill(0xFFFFFF, 100);				lineTo(cw, 0);				lineTo(cw, ch);				lineTo(0, ch);				lineTo(0, 0);				endFill();			}			var ypos = Math.floor(i/ncols);			var xpos = i-(ypos*ncols);			clip.draw._x = xpos*cw;			clip.draw._y = ypos*ch;			clip.foto.setMask(clip.draw);			if (mode == 2) {				clip._rotation = -45;			}			if (mode == 1) {				clip = clip.draw;			}			clip._xscale = clip._yscale=0;			i++;			c = 0;		} else {			c++;		}		for (var a = cinit; a<i; a++)		{			var clip = eval("cuadre"+a);			if (mode == 1) {				clip = clip.draw;			}			if (fx) {				if (mode == 1)				{					var fxcols = new Color(eval("cuadre"+a).foto);				} else				{					var fxcol = new Color(clip);				}				var tval = 500-((clip._xscale/100)*400);				fxcol.setTransform({ra:tval, ga:tval, ba:tval});			}			if (clip._xscale>=100)			{				cinit = a;				clip._yscale = clip._xscale=100;				clip._rotation = 0;				if (cinit == i-1) {					delete onEnterFrame;				}				continue;			}			if (mode == 2)			{				clip._rotation += Math.ceil((0-clip._rotation)/easing);			}			clip._xscale = clip._yscale += Math.ceil((100-clip._yscale)/easing);		}	};};